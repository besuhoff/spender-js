<div class="form">
  <div>
    Перевёл <input autofocus class="form-control form-control--sm" type="number" ng-model="$ctrl.expense.amount" step="0.01">
    {{$ctrl.expense.paymentMethod.currency.symbol}}

    <select class="form-control"
            ng-model="$ctrl.expense.paymentMethod"
            ng-options="paymentMethod as paymentMethod.name for paymentMethod in $ctrl.paymentMethods">
      <option value="">- платёжным средством -</option>
    </select>
    <span class="text-nowrap">
      на <select class="form-control"
               ng-model="$ctrl.income.paymentMethod"
               ng-options="paymentMethod as paymentMethod.name
                           disable when paymentMethod.id === $ctrl.expense.paymentMethod.id
                           for paymentMethod in $ctrl.paymentMethods">
        <option value="">- платёжное средство -</option>
      </select>
    </span>
    <span ng-if="$ctrl.expense.paymentMethod && $ctrl.income.paymentMethod && $ctrl.expense.paymentMethod.currency.id !== $ctrl.income.paymentMethod.currency.id">
      по&nbsp;курсу <input class="form-control form-control--sm" type="number" ng-model="$ctrl.sourceIncomeCurrencyRate">
      <span class="text-nowrap">к <input class="form-control form-control--sm" type="number" ng-model="$ctrl.targetIncomeCurrencyRate"></span>
    </span>
  </div>

  <div ng-if="$ctrl.getTargetAmount() !== undefined" class="form__hint">
    ({{$ctrl.getTargetAmount() | currency:$ctrl.income.paymentMethod.currency.code + ' ':2}} будет начислено на счёт «{{$ctrl.income.paymentMethod.name}}»)
  </div>

  <div>
    Дата: <datetime ng-model="$ctrl.expense.createdAt"></datetime>,
    комментарий: <input class="form-control"
                        ng-model="$ctrl.expense.comment">

    <div class="button-hint button-hint--lg">
      <div class="button-hint__inner">
        <button class="btn-primary btn btn-inline"
                ng-disabled="$ctrl.getTargetAmount() === undefined"
                ng-click="$ctrl.save()">Записать транзакцию</button>
        <div class="button-hint__text" ng-show="$ctrl.getTargetAmount() === undefined">
          Укажите
          <span ng-show="!$ctrl.expense.paymentMethod">платежное средство</span><!--
          --><span ng-show="!$ctrl.income.paymentMethod && !$ctrl.expense.paymentMethod"> и </span><!--
          --><span ng-show="!$ctrl.income.paymentMethod">целевой счёт</span><!--
          --><span ng-show="(!$ctrl.expense.paymentMethod || !$ctrl.income.paymentMethod) && ($ctrl.expense.paymentMethod.currency.id !== $ctrl.income.paymentMethod.currency.id && (!$ctrl.sourceIncomeCurrencyRate || !$ctrl.targetIncomeCurrencyRate))">, а также </span><!--
          --><span ng-show="$ctrl.expense.paymentMethod.currency.id !== $ctrl.income.paymentMethod.currency.id && (!$ctrl.sourceIncome.currencyRate || !$ctrl.targetIncome.currencyRate)">курс обмена</span>
        </div>
      </div>
    </div>
  </div>
</div>